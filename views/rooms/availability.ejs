

<body>

    <div class="page-loader"></div>

    <div class="wrapper">

     

        <!-- ========================  Checkout ======================== -->

        <!-- ========================  Checkout ======================== -->

<section class="page">

    <!-- ===  Page header === -->

    <div class="page-header" style="background-image:url(/assets/images/header-1.jpg)">
        <div class="container">
            <h2 class="title">Available Rooms</h2>
            <p>Select your preferred accommodation</p>
        </div>
    </div>

    <!-- ===  Checkout steps === -->

    <div class="step-wrapper">
        <div class="container">
            <div class="stepper">
                <ul class="row">
                    <li class="col-md-4 active">
                        <a href="#"><span data-text="Room & rates"></span></a>
                    </li>
                    <li class="col-md-4">
                        <a href="#"><span data-text="Reservation"></span></a>
                    </li>
                    <li class="col-md-4">
                        <a href="#"><span data-text="Checkout"></span></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <!-- ===  Checkout === -->

    <div class="checkout">

        <div class="container">

            <!-- Search Criteria Summary -->
            <div class="search-summary mb-4">
                <div class="alert alert-info">
                    <h4>Your Search Criteria</h4>
                    <div class="row">
                        <div class="col-md-3">
                            <strong>Check-in:</strong> <%= checkIn ? new Date(checkIn).toLocaleDateString() : 'Not specified' %>
                        </div>
                        <div class="col-md-3">
                            <strong>Check-out:</strong> <%= checkOut ? new Date(checkOut).toLocaleDateString() : 'Not specified' %>
                        </div>
                        <div class="col-md-3">
                            <strong>Guests:</strong> <%= guests || 'Not specified' %>
                        </div>
                        <div class="col-md-3">
                            <a href="/rooms" class="btn btn-sm btn-clean-dark">Modify Search</a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="clearfix">

                <!-- ========================  Cart wrapper ======================== -->

                <div class="cart-wrapper">

                    <!--cart header -->

                    <div class="cart-block cart-block-header clearfix">
                        <div>
                            <span>Room type</span>
                        </div>
                        <div class="text-center">
                            <span>Amenities</span>
                        </div>
                        <div class="text-right">
                            <span>Price per night</span>
                        </div>
                    </div>

                    <!--cart items-->
<% if (rooms && rooms.length > 0) { %>
    <div class="clearfix">
        <% rooms.forEach((room, index) => { %>
        <div class="cart-block cart-block-item clearfix">
            <div class="image">
                <a href="/rooms/<%= room._id %>" target="_blank">
                    <% if (room.images && room.images.length > 0) { %>
                        <img src="<%= room.images[0] %>" alt="<%= room.type %>" />
                    <% } else { %>
                        <img src="/assets/images/room-default.jpg" alt="<%= room.type %>" />
                    <% } %>
                </a>
            </div>
            <div class="title">
                <div class="h2"><a href="/rooms/<%= room._id %>" target="_blank"><%= room.type %></a></div>
                <p><%= room.description || 'Luxurious accommodation with premium amenities' %></p>
                
                <p>
                    <strong>Capacity:</strong> Up to <%= room.amenities && room.amenities.includes('2-4 Persons') ? '4' : '2' %> guests
                </p>
                <div class="mt-3">
                    <!-- CHANGED: Added target="_blank" to open in new tab -->
                    <a href="/rooms/<%= room._id %>" class="btn btn-sm btn-clean-dark" target="_blank">View Details</a>
                </div>
            </div>
            <div class="amenities text-center">
                <% if (room.amenities && room.amenities.length > 0) { %>
                    <div class="amenities-list">
                        <% room.amenities.slice(0, 3).forEach(amenity => { %>
                            <div class="amenity-item">
                                <i class="fa fa-check text-success"></i>
                                <small><%= amenity %></small>
                            </div>
                        <% }) %>
                        <% if (room.amenities.length > 3) { %>
                            <div class="amenity-item">
                                <i class="fa fa-plus text-muted"></i>
                                <small>+<%= room.amenities.length - 3 %> more</small>
                            </div>
                        <% } %>
                    </div>
                <% } %>
            </div>
            <div class="price">
                <span class="final h3">â‚¦ <%= room.price.toLocaleString() %></span>
                <span class="discount">per night</span>
                <div class="mt-3">
                    <form action="/rooms/book/<%= room._id %>" method="POST" class="d-inline">
                        <input type="hidden" name="checkIn" value="<%= checkIn %>">
                        <input type="hidden" name="checkOut" value="<%= checkOut %>">
                        <input type="hidden" name="guests" value="<%= guests %>">
                        <button type="submit" class="btn btn-main btn-sm">Book Now</button>
                    </form>
                </div>
            </div>
        </div>
        
        <!-- Line break between rooms (except after the last one) -->
        <% if (index < rooms.length - 1) { %>
            <hr class="room-divider" />
        <% } %>
        
        <% }) %>
    </div>
<% } else { %>
    <!-- No rooms available -->
    <div class="cart-block cart-block-item clearfix text-center py-5">
        <div class="col-12">
            <i class="fa fa-bed fa-4x text-muted mb-3"></i>
            <h3 class="text-muted">No Rooms Available</h3>
            <p class="text-muted">We're sorry, but no rooms are available for your selected dates and criteria.</p>
            <div class="mt-4">
                <a href="/rooms" class="btn btn-main">Search Different Dates</a>
                <a href="/contact" class="btn btn-clean-dark">Contact Us</a>
            </div>
        </div>
    </div>
<% } %>

                    <!-- ========================  Cart navigation ======================== -->

                    <div class="clearfix">
                        <div class="cart-block cart-block-footer cart-block-footer-price clearfix">
                            <div>
                                <a href="/rooms" class="btn btn-clean-dark">
                                    <span class="icon icon-chevron-left"></span> Back to Rooms
                                </a>
                            </div>
                            <div>
                                <% if (rooms && rooms.length > 0) { %>
                                    <small class="text-muted d-block mb-2"><%= rooms.length %> room(s) available</small>
                                <% } %>
                                <a href="/contact" class="btn btn-main">Need Help? Contact Us</a>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Additional Information -->
            <div class="row mt-5">
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body text-center">
                            <i class="fa fa-shield fa-3x text-primary mb-3"></i>
                            <h5>Best Rate Guarantee</h5>
                            <p class="text-muted">Find a lower rate elsewhere and we'll match it with an additional 10% discount.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body text-center">
                            <i class="fa fa-credit-card fa-3x text-primary mb-3"></i>
                            <h5>No Booking Fees</h5>
                            <p class="text-muted">Book directly with us and avoid unnecessary booking fees and charges.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body text-center">
                            <i class="fa fa-clock-o fa-3x text-primary mb-3"></i>
                            <h5>Flexible Cancellation</h5>
                            <p class="text-muted">Free cancellation up to 24 hours before your check-in date.</p>
                        </div>
                    </div>
                </div>
            </div>

        </div> <!--/container-->
    </div> <!--/checkout-->

</section>

        <!-- ========================  Subscribe ======================== -->

        <section class="subscribe">
            <div class="container">
                <div class="box">
                    <h2 class="title">Special Offers</h2>
                    <div class="text">
                        <p>Subscribe to receive exclusive deals & promotions</p>
                    </div>
                    <div class="form-group">
                        <input type="text" value="" placeholder="Your email" class="form-control" />
                        <button class="btn btn-sm btn-main">Subscribe</button>
                    </div>
                </div>
            </div>
        </section> 

        <!-- ================== Footer  ================== -->

        

    </div> <!--/wrapper-->

    <!--JS files-->
    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery-ui.js"></script>
    <script src="/js/jquery.bootstrap.js"></script>
    <script src="/js/jquery.magnific-popup.js"></script>
    <script src="/js/jquery.owl.carousel.js"></script>
    <script src="/js/main.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Add smooth scrolling for room items
            $('.cart-block-item').hover(
                function() {
                    $(this).addClass('hover');
                },
                function() {
                    $(this).removeClass('hover');
                }
            );

            // Initialize tooltips for amenities
            $('[data-toggle="tooltip"]').tooltip();
        });
    </script>

    <style>
        .amenities-list {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        .amenity-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .search-summary .alert {
            border-left: 4px solid #007bff;
        }
        .cart-block-item.hover {
            background-color: #f8f9fa;
            transition: background-color 0.3s ease;
        }
        .discount {
            text-decoration: line-through;
            color: #6c757d;
            font-size: 0.9em;
        }
        .room-divider {
        margin: 30px 0;
        border: 0;
        border-top: 1px solid #e9ecef;
        opacity: 0.7;
    }
    </style>
</body>

</html>